{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Desktop/React/Groove/client/src/components/shared/fileUpload.jsx\";\nimport React, { Component } from 'react';\nimport Dropzone from 'react-dropzone';\nimport { addImage, clearImage, removeImage } from '../../store/actions/productActions';\nimport { connect } from 'react-redux';\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\nimport faPlusCircle from '@fortawesome/fontawesome-free-solid/faPlusCircle';\nimport faTimesCircle from '@fortawesome/fontawesome-free-solid/faTimesCircle';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nconst dropzoneStyles = {\n  float: 'left',\n  width: '25%',\n  height: '180px',\n  padding: '10px',\n  cursor: 'pointer'\n};\nconst wrap = {\n  background: '#eaeaea',\n  height: '100%',\n  width: '100%',\n  textAlign: 'center',\n  padding: '15px',\n  boxSizing: 'border-box',\n  fontSize: '49px',\n  border: '1px solid #eaeaea'\n};\nconst delIconStyles = {\n  position: 'absolute',\n  right: '4px',\n  top: '4px',\n  color: 'red',\n  width: '32px',\n  height: '32px',\n  opacity: '0.8',\n  cursor: 'pointer'\n};\n\nclass FileUpload extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      uploadedFiles: [],\n      uploading: false\n    };\n\n    this.handleDrop = files => {\n      this.setState({\n        uploading: true\n      });\n      this.props.dispatch(addImage(files[0])).then(res => {\n        this.setState({\n          uploading: false,\n          uploadedFiles: [...this.state.uploadedFiles, res.payload]\n        }, () => {\n          this.props.imgHandler(this.state.uploadedFiles);\n        });\n        setTimeout(() => {\n          this.props.dispatch(clearImage());\n        }, 3000);\n      });\n    };\n\n    this.onRemove = imgId => {\n      this.props.dispatch(removeImage(imgId)).then(res => {\n        let newImagesArray = this.state.uploadedFiles.filter(img => {\n          return img.public_id !== imgId;\n        });\n        this.setState({\n          uploadedFiles: newImagesArray\n        }, () => {\n          this.props.imgHandler(newImagesArray);\n        });\n      });\n    };\n\n    this.showUploadedImages = () => this.state.uploadedFiles.map(img => React.createElement(\"div\", {\n      className: \"dropzone_box\",\n      key: img.public_id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wrap\",\n      style: {\n        background: \"url(\".concat(img.url, \") no-repeat\"),\n        position: 'relative'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(FontAwesomeIcon, {\n      icon: faTimesCircle,\n      onClick: () => this.onRemove(img.public_id),\n      style: delIconStyles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    })))));\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.reset) {\n      return state = {\n        uploadedFiles: [],\n        uploading: false\n      };\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      style: {\n        marginBottom: '22px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"dropzone clear\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Dropzone, {\n      onDrop: e => this.handleDrop(e),\n      multiple: false,\n      accept: \"image/jpeg, image/jpg, image/png\",\n      maxSize: 2000000,\n      style: dropzoneStyles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, ({\n      getRootProps,\n      getInputProps\n    }) => React.createElement(\"div\", Object.assign({}, getRootProps({\n      className: 'dropzone'\n    }), {\n      style: dropzoneStyles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(\"input\", Object.assign({}, getInputProps(), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    })), React.createElement(FontAwesomeIcon, {\n      icon: faPlusCircle,\n      style: wrap,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }))), this.state.uploadedFiles.length !== 0 && this.showUploadedImages(), this.state.uploading && React.createElement(\"div\", {\n      className: \"dropzone_box\",\n      styles: {\n        textAlign: 'center',\n        paddingTop: '50px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(CircularProgress, {\n      style: {\n        color: '#00bcd5'\n      },\n      thickness: 7,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default connect()(FileUpload);","map":{"version":3,"sources":["/Users/apple/Desktop/React/Groove/client/src/components/shared/fileUpload.jsx"],"names":["React","Component","Dropzone","addImage","clearImage","removeImage","connect","FontAwesomeIcon","faPlusCircle","faTimesCircle","CircularProgress","dropzoneStyles","float","width","height","padding","cursor","wrap","background","textAlign","boxSizing","fontSize","border","delIconStyles","position","right","top","color","opacity","FileUpload","state","uploadedFiles","uploading","handleDrop","files","setState","props","dispatch","then","res","payload","imgHandler","setTimeout","onRemove","imgId","newImagesArray","filter","img","public_id","showUploadedImages","map","url","getDerivedStateFromProps","reset","render","marginBottom","e","getRootProps","getInputProps","className","length","paddingTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Dropzone from 'react-dropzone';\nimport {\n  addImage,\n  clearImage,\n  removeImage\n} from '../../store/actions/productActions';\nimport { connect } from 'react-redux';\nimport FontAwesomeIcon from '@fortawesome/react-fontawesome';\nimport faPlusCircle from '@fortawesome/fontawesome-free-solid/faPlusCircle';\nimport faTimesCircle from '@fortawesome/fontawesome-free-solid/faTimesCircle';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst dropzoneStyles = {\n  float: 'left',\n  width: '25%',\n  height: '180px',\n  padding: '10px',\n  cursor: 'pointer'\n};\n\nconst wrap = {\n  background: '#eaeaea',\n  height: '100%',\n  width: '100%',\n  textAlign: 'center',\n  padding: '15px',\n  boxSizing: 'border-box',\n  fontSize: '49px',\n  border: '1px solid #eaeaea'\n};\n\nconst delIconStyles = {\n  position: 'absolute',\n  right: '4px',\n  top: '4px',\n  color: 'red',\n  width: '32px',\n  height: '32px',\n  opacity: '0.8',\n  cursor: 'pointer'\n}\n\nclass FileUpload extends Component {\n  \n  state = {\n    uploadedFiles: [],\n    uploading: false\n  };\n\n  static getDerivedStateFromProps(props, state){\n    if(props.reset){\n      return state = {\n        uploadedFiles: [],\n        uploading:false\n      }\n    }\n  }\n\n  handleDrop = files => {\n    this.setState({\n      uploading: true\n    });\n\n    this.props.dispatch(addImage(files[0])).then(res => {\n      this.setState(\n        {\n          uploading: false,\n          uploadedFiles: [...this.state.uploadedFiles, res.payload]\n        },\n        () => {\n          this.props.imgHandler(this.state.uploadedFiles);\n        }\n      );\n      setTimeout(() => {\n        this.props.dispatch(clearImage());\n      }, 3000);\n    });\n  };\n\n  onRemove = imgId => {\n    this.props.dispatch(removeImage(imgId)).then(res => {\n      let newImagesArray = this.state.uploadedFiles.filter(img => {\n        return img.public_id !== imgId;\n      });\n      this.setState({ uploadedFiles: newImagesArray }, () => {\n        this.props.imgHandler(newImagesArray);\n      });\n    });\n  };\n\n  showUploadedImages = () =>\n    this.state.uploadedFiles.map(img => (\n      <div className=\"dropzone_box\" key={img.public_id}>\n        <div\n          className=\"wrap\"\n          style={{\n            background: `url(${img.url}) no-repeat`,\n            position: 'relative'\n          }}\n        >\n          <div>\n            <FontAwesomeIcon\n              icon={faTimesCircle}\n              onClick={() => this.onRemove(img.public_id)}\n              style={delIconStyles}\n            />\n          </div>\n        </div>\n      </div>\n    ));\n\n  render() {\n    return (\n      <div style={{ marginBottom: '22px' }}>\n        <section>\n          <div className=\"dropzone clear\">\n            <Dropzone\n              onDrop={e => this.handleDrop(e)}\n              multiple={false}\n              accept=\"image/jpeg, image/jpg, image/png\"\n              maxSize={2000000}\n              style={dropzoneStyles}\n            >\n              {({ getRootProps, getInputProps }) => (\n                <div\n                  {...getRootProps({ className: 'dropzone' })}\n                  style={dropzoneStyles}\n                >\n                  <input {...getInputProps()} />\n\n                  <FontAwesomeIcon icon={faPlusCircle} style={wrap} />\n                </div>\n              )}\n            </Dropzone>\n            {this.state.uploadedFiles.length !== 0 && this.showUploadedImages()}\n            {this.state.uploading && (\n              <div\n                className=\"dropzone_box\"\n                styles={{\n                  textAlign: 'center',\n                  paddingTop: '50px'\n                }}\n              >\n                <CircularProgress style={{ color: '#00bcd5' }} thickness={7} />\n              </div>\n            )}\n          </div>\n        </section>\n      </div>\n    );\n  }\n}\n\nexport default connect()(FileUpload);\n"]},"metadata":{},"sourceType":"module"}